body {
  background:black;
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  overflow:hidden;
}

#game {
  width:1000px;
  height:800px;
  background:white;
  position:absolute;
  top:50px;
  left:50px;
  overflow:hidden;
}

#phone {
  width:300px;
  height:600px;
  background:#333;
  position:absolute;
  top:150px;
  left:1200px;
  overflow:hidden;
}

#phone-dead {
  position:absolute;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:red;
  color:white;
  font-size:100px;
  z-index:200;
  opacity:0;
}

body[data-state="lost"] #phone-dead {
  opacity:1;
}

#score {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  text-align:center;
  color:white;
  font-size:82px;
  z-index:100;
}

#score-bar {
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  height:100%;
  background:#4FFFBF;
  transition:height 1000ms linear;
}





.play-background {
  width:40000%;
  height:100%;
  position:absolute;
  top:0;
  left:0;
  background:url(../assets/background.png) no-repeat left center / auto 100% transparent;
  transition:left 3000ms cubic-bezier(0.225, 0.000, 0.755, 1.000);
}

body[data-state="play"][data-play-step-id="0"] .play-background { left:0%; }
body[data-state="play"][data-play-step-id="1"] .play-background { left:-100%; }
body[data-state="play"][data-play-step-id="2"] .play-background { left:-200%; }
body[data-state="play"][data-play-step-id="3"] .play-background { left:-300%; }
body[data-state="play"][data-play-step-id="4"] .play-background { left:-400%; }
body[data-state="play"][data-play-step-id="5"] .play-background { left:-500%; }
body[data-state="play"][data-play-step-id="6"] .play-background { left:-600%; }
body[data-state="play"][data-play-step-id="7"] .play-background { left:-700%; }
body[data-state="play"][data-play-step-id="8"] .play-background { left:-800%; }
body[data-state="play"][data-play-step-id="9"] .play-background { left:-900%; }
body[data-state="play"][data-play-step-id="10"] .play-background { left:-1000%; }



.play-foreground {
  width:20000%;
  height:100%;
  position:absolute;
  top:0;
  left:0;
  background:url(../assets/foreground.png) no-repeat left center / auto 100% transparent;
  transition:left 3000ms cubic-bezier(0.225, 0.000, 0.755, 1.000);
}

body[data-state="play"][data-play-step-id="0"] .play-foreground { left:0%; }
body[data-state="play"][data-play-step-id="1"] .play-foreground { left:-200%; }
body[data-state="play"][data-play-step-id="2"] .play-foreground { left:-400%; }
body[data-state="play"][data-play-step-id="3"] .play-foreground { left:-600%; }
body[data-state="play"][data-play-step-id="4"] .play-foreground { left:-800%; }
body[data-state="play"][data-play-step-id="5"] .play-foreground { left:-1000%; }
body[data-state="play"][data-play-step-id="6"] .play-foreground { left:-1200%; }
body[data-state="play"][data-play-step-id="7"] .play-foreground { left:-1400%; }
body[data-state="play"][data-play-step-id="8"] .play-foreground { left:-1600%; }
body[data-state="play"][data-play-step-id="9"] .play-foreground { left:-1800%; }
body[data-state="play"][data-play-step-id="10"] .play-foreground { left:-2000%; }

.play-foreground .npc {
  position:absolute;
  bottom:200px;
}

#npc1 {
  left:2600px;
  width:200px;
  height:100px;
  background:url('../assets/npc1.png') center top / 100% auto;
  animation: npc1 1s steps(12) infinite forwards;
  animation-play-state: paused;
}

@keyframes npc1 {
   100% { background-position: 0 -1196px; }
}



body[data-state="play"][data-play-step-id="1"][data-play-step-state="transition"] #npc1 {
  /* NPC is appearing */
  animation-play-state: running;
}

body[data-state="play"][data-play-step-id="1"][data-play-step-state="show_answer"] #npc1 {
  /* Question is displayed */
  animation-play-state: paused;
}

body[data-state="play"][data-play-step-id="1"][data-play-step-state="show_choices"] #npc1 {
  /* Choices are displayed */
}

body[data-state="play"][data-play-step-id="1"][data-play-step-state="listen_to_user"] #npc1 {
  /* Waiting for user to vote (timer is on) */
}

body[data-state="play"][data-question-1] #npc1 {
  /* User has voted */
}

body[data-state="play"][data-question-1="right"] #npc1 {
  /* Question has been answered, but right choice */
  background:green;
}

body[data-state="play"][data-question-1="wrong"] #npc1 {
  /* Question has been answered, but wrong choice */
  background:red;
}


.play-player {
  width: 190px;
  height: 240px;
  background: url('../assets/player.png') left center;
  position:absolute;
  top:370px;
  left:305px;
  animation: player 0.8s steps(10) infinite forwards;
  animation-play-state: paused;
}

@keyframes player {
   100% { background-position: -1900px; }
}

body[data-state="play"][data-play-step-state="transition"] .play-player {
  animation-play-state: running;
}

body[data-state="play"][data-play-step-state="right-choice"] .play-player {
  /* Custom sprite for player */
}

body[data-state="play"][data-play-step-state="wrong-choice"] .play-player {
  /* Custom sprite for player */
}



.play-step {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:1000;
  opacity:0;
}


body[data-state="play"][data-play-step-id="0"] .play-step[data-play-step-id="0"],
body[data-state="play"][data-play-step-id="1"] .play-step[data-play-step-id="1"],
body[data-state="play"][data-play-step-id="2"] .play-step[data-play-step-id="2"],
body[data-state="play"][data-play-step-id="3"] .play-step[data-play-step-id="3"],
body[data-state="play"][data-play-step-id="4"] .play-step[data-play-step-id="4"],
body[data-state="play"][data-play-step-id="5"] .play-step[data-play-step-id="5"],
body[data-state="play"][data-play-step-id="6"] .play-step[data-play-step-id="6"],
body[data-state="play"][data-play-step-id="7"] .play-step[data-play-step-id="7"],
body[data-state="play"][data-play-step-id="8"] .play-step[data-play-step-id="8"],
body[data-state="play"][data-play-step-id="9"] .play-step[data-play-step-id="9"],
body[data-state="play"][data-play-step-id="10"] .play-step[data-play-step-id="10"],
body[data-state="play"][data-play-step-id="11"] .play-step[data-play-step-id="11"],
body[data-state="play"][data-play-step-id="12"] .play-step[data-play-step-id="12"],
body[data-state="play"][data-play-step-id="13"] .play-step[data-play-step-id="13"],
body[data-state="play"][data-play-step-id="14"] .play-step[data-play-step-id="14"],
body[data-state="play"][data-play-step-id="15"] .play-step[data-play-step-id="15"],
body[data-state="play"][data-play-step-id="16"] .play-step[data-play-step-id="16"],
body[data-state="play"][data-play-step-id="17"] .play-step[data-play-step-id="17"],
body[data-state="play"][data-play-step-id="18"] .play-step[data-play-step-id="18"],
body[data-state="play"][data-play-step-id="19"] .play-step[data-play-step-id="19"],
body[data-state="play"][data-play-step-id="20"] .play-step[data-play-step-id="20"] {
  opacity:1;
}




.play-step .question {
  font-size:36px;
  text-align:center;
  font-weight:bold;
  position:absolute;
  top:64px;
  left:64px;
  right:64px;
  opacity:0;
}

body[data-state="play"][data-play-step-state="show-question"] .question,
body[data-state="play"][data-play-step-state="show-choices"] .question,
body[data-state="play"][data-play-step-state="listen-to-user"] .question,
body[data-state="play"][data-play-step-state="right-choice"] .question,
body[data-state="play"][data-play-step-state="wrong-choice"] .question {
  opacity:1;
}

.play-step .choice {
  position:absolute;
  width:35%;
  height:300px;
  top:250px;
  font-size:26px;
  text-align:center;
  opacity:0;
}

.play-step .choice-left { left:32px; }
.play-step .choice-right { right:32px; }

body[data-state="play"][data-play-step-state="show-choices"] .choice,
body[data-state="play"][data-play-step-state="listen-to-user"] .choice,
body[data-state="play"][data-play-step-state="right-choice"] .choice,
body[data-state="play"][data-play-step-state="wrong-choice"] .choice {
  opacity:1;
}

body[data-state="play"][data-play-step-state="right-choice"] .choice[data-right-choice] {
  color:green;
}

body[data-state="play"][data-play-step-state="wrong-choice"] .choice[data-wrong-choice] {
  color:red;
}



.state-screen {
  position:absolute;
  top:0;
  left:0;
  bottom:0;
  right:0;
  background:white;
  display:none;
}

body[data-state="wait"] .state-screen[data-state-screen="wait"],
body[data-state="intro"] .state-screen[data-state-screen="intro"],
body[data-state="play"] .state-screen[data-state-screen="play"],
body[data-state="won"] .state-screen[data-state-screen="won"],
body[data-state="lost"] .state-screen[data-state-screen="lost"],
body[data-state="outro"] .state-screen[data-state-screen="outro"] {
  display:block;
}

[data-show-if-can-interact-is]  {
  opacity:0;
}

body[data-can-interact="true"] [data-show-if-can-interact-is="true"],
body[data-can-interact="false"] [data-show-if-can-interact-is="false"] {
  opacity:1;
}
